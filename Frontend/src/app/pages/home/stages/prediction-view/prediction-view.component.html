<div class="prediction-view">
    <div class="prediction-view__description">
        <h1>
            Tiến hành dự đoán
        </h1>
        <p>
            Dự đoán dung lượng pin và thời gian sống còn lại của pin tại chu kì được chọn dựa vào trạng thái của chu kì đó.
        </p>
        <p>
            Các trạng thái của mỗi bước trong quy trình:
        </p>
        <ul>
            <li>
                <mat-icon aria-hidden="false" aria-label="Example home icon" class="mat-icon pending"
                                        fontIcon="pending"></mat-icon> - Những bước có biểu tượng này vẫn chưa đến lượt thực hiện.
            </li>
            <li>
                <mat-icon aria-hidden="false" aria-label="Example home icon" class="mat-icon processing"
                                        fontIcon="cached"></mat-icon> - Bước có biểu tượng này đang trong quá trình thực hiện.
            </li>
            <li>
                <mat-icon aria-hidden="false" aria-label="Example home icon" class="mat-icon done"
                                        fontIcon="task_alt"></mat-icon> - Những bước có biểu tượng này là những bước đã được hoàn thành.
            </li>
            <li>
                <mat-icon aria-hidden="false" aria-label="Example home icon" class="mat-icon error"
                                        fontIcon="error"></mat-icon> - Bước có biểu tượng này chứng tỏ đã xảy ra lỗi tại bước này.
            </li>
        </ul>
        <p>
            Nếu xảy ra lỗi, hãy cố gắng bấm nút <b>Thử lại</b> để thực hiện lại quá trình dự đoán. Nếu nút <b>Thử lại</b> không hoạt động, 
            hãy tải lại trang.
        </p>
    </div>
    <div class="prediction-view__panel">
        <div>
            <button mat-flat-button mat-flat-button color="primary"
                [disabled]="isRetryBtnDisabled()"
                (click)="retry()">
                Thử lại
            </button>
        </div>
    </div>
    <div class="prediction-view__main" #rightLayout>
        <ul class="prediction-stage-list">
            @for (stage of predictionStages(); track stage.code){
                <li class="prediction-stage" [matTooltip]="stage.name">
                    @switch (stage.status) {
                        @case ("PENDING") {
                            <div class="pending">
                                <span class="status">
                                    <mat-icon aria-hidden="false" aria-label="Example home icon" 
                                        fontIcon="pending"></mat-icon>
                                </span>
                                <span class="name">{{stage.name}}</span>
                            </div>
                        }
                        @case ("PROCESSING") {
                            <div class="processing">
                                <span class="status">
                                    <mat-icon aria-hidden="false" aria-label="Example home icon" 
                                        fontIcon="cached"></mat-icon>
                                </span>
                                <span class="name">{{stage.name}}</span>
                            </div>
                        }
                        @case ("DONE") {
                            <div class="done">
                                <span class="status">
                                    <mat-icon aria-hidden="false" aria-label="Example home icon" 
                                        fontIcon="task_alt"></mat-icon>
                                </span>
                                <span class="name">{{stage.name}}</span>
                            </div>
                        }
                        @case ("ERROR") {
                            <div class="error">
                                <span class="status">
                                    <mat-icon aria-hidden="false" aria-label="Example home icon" 
                                        fontIcon="error"></mat-icon>
                                </span>
                                <span class="name">{{stage.name}}</span>
                            </div>
                        }
                    }
                </li>
            }
        </ul>
    </div>
</div>